{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": { "url": "https://raw.githubusercontent.com/Alicia-hub03/3179/refs/heads/main/Vis2/data/top_10_countries_by_year.csv" },
    "width": 900,
    "height": 350,
    "params": [
        {
            "name": "Year_selection",
            "value": 2020,
            "bind": {
                "input": "range",
                "min": 2020,
                "max": 2023,
                "step": 1,
                "name": "Year:  "
            }
        }
    ],
    "transform": [
        { "filter": "datum.year == Year_selection" }
    ],
    "layer": [
      {
          "mark": {"type": "bar", "size":6},
          "encoding": {
            "y": {
              "field": "country",
              "title": "Country",
              "type": "nominal"

            },
            "x": {
              "field": "total_arrivals",
              "type": "quantitative",
              "axis": {"grid": false}, 
              "title": "Number of Tourist Arrivals"
            },
            "color": {
              "field":"country"
            },
            "tooltip":[
              {"field": "country", "type": "nominal"},
              {"field": "total_arrivals", "type": "quantitative"}
          ]
          }
        },
        {
          "mark": {
            "type": "point",
            "size": 300,
            "filled": true,
            "opacity": 1
          },
          "encoding": {
            "color": {
              "field":"country",  
              "title": "Country",
              "scale": {
                    "range": ["#91cdcb", "#37b8b4", "#9FE2BF", "#40E0D0", "#6495ED","#CCCCFF",  "#884ea0",  "#af601a", "#f1c40f", "#f7dc6f"]
                 }        
          }
            ,
            "y": {
              "field": "country",
              "type": "nominal",
              "sort": [
                "Singapore",
                "Indonesia",
                "Thailand",
                "China",
                "Brunei",
                "India",
                "Bangladesh",
                "Philippines",
                "South Korea",
                "Vietnam"
              ]
            },
            "x": {
              "field": "total_arrivals",
              "type": "quantitative"
          },
          "tooltip":[
              {"field": "country", "type": "nominal", "title": "Country"},
              {"field": "total_arrivals", "type": "quantitative","title": "Number of Tourist", "format": ","}
          ]
          }
        },
        {
          "mark": {
            "type": "text",
            "align": "center",
            "baseline": "middle",
            "dx": 0, 
            "dy": 0,
            "fontWeight": "normal",
            "fontSize": 14,
            "color": "cadetblue"
          },
          "encoding": {
              "x": {
              "value": 800
            },
            "y": {
              "value": 50
            },
            "text": {"condition": {"test": "datum.country == 'Singapore' &&  Year_selection != '2021'", "value": ["Singapore (Rank 1), Indonesia (Rank 2) and Thailand (Rank 3)", "are Malaysia's top 3 visitors, except in 2021,", "where global and nationwide lockdowns was implemented."]}},
            "color": {"value": "black"}
          }
      },
      {
        "mark": {
          "type": "text",
          "align": "center",
          "baseline": "middle",
          "dx": 0, 
          "dy": 0,
          "fontWeight": "normal",
          "fontSize": 14,
          "color": "cadetblue"
        },
        "encoding": {
            "x": {
            "value": 800
          },
          "y": {
            "value": 50
          },
          "text": {"condition": {"test": "datum.country == 'Thailand' &&  Year_selection == '2021'", "value": ["Thailand (Rank 1), Indonesia (Rank 2) and Singapore (Rank 3)", "are Malaysia's top 3 visitors in 2021."]}},
          "color": {"value": "black"}
        }
    }
    ],
    "config": {
        "view": {"stroke": null}, 
        "background": "#ffffff",
        "legend": {"disable": true}
    }
  }